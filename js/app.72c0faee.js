(function(t){function e(e){for(var n,o,r=e[0],l=e[1],c=e[2],f=0,d=[];f<r.length;f++)o=r[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,r=1;r<s.length;r++){var l=s[r];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},a={app:0},i=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/diatool-frontend/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},1732:function(t,e,s){},3280:function(t,e,s){t.exports=s.p+"img/dtu.5d49d479.png"},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("b-navbar",{staticClass:"shadow",staticStyle:{"background-color":"#900 !important"},attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[n("b-navbar-brand",{attrs:{href:"#"}},[n("img",{staticClass:"d-inline-block align-top",attrs:{src:s("3280"),alt:"DTU",height:"30"}}),t._v(" DiaTool ")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",[t._v("About")])],1)],1)],1),n("b-container",{attrs:{fluid:""}},[n("b-row",[n("nav",{staticClass:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse border-right p-0 "},[n("div",{staticClass:"sidebar-sticky pt-3"},[n("input",{ref:"file",attrs:{accept:".csv",type:"file",hidden:""},on:{change:t.onFileSelected}}),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.uploading,expression:"!uploading"}],staticClass:"ml-3",attrs:{variant:"outline-secondary",disabled:"online"!=this.systemStatus},on:{click:t.selectFile}},[t._v("Upload a file")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:t.uploading,expression:"uploading"}],staticClass:"ml-3",attrs:{variant:"outline-secondary",disabled:""}},[t._v(" Uploading file...")]),n("p",{staticClass:"ml-3 mr-3 mt-2 mb-2 text-muted"},[n("small",[n("strong",[t._v("Attention:")]),t._v(" Uploaded files could be visible for a certain amount of time.")])]),n("h6",{staticClass:"sidebar-heading justify-content-between align-items-center px-3 mt-4 mb-1 text-muted",class:Object.keys(this.files).length>0?"d-flex":"d-none"},[t._v(" Uploaded files ")]),n("FilesList",{attrs:{files:t.files}}),n("SystemStatus",{attrs:{systemStatus:t.systemStatus}})],1)]),n("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 pl-md-4 pt-3 pr-0",attrs:{role:"main"}},[n("router-view",{attrs:{files:this.files}})],1)])],1)],1)},i=[],o=(s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-group list-group-flush"},t._l(Object.keys(t.files),(function(e){return s("b-list-group-item",{key:e,staticClass:"list-group-item list-group-item-action bg-light border-0 align-items-center p-2 pl-3",attrs:{to:{name:"Details",params:{id:e}}}},[s("font-awesome-icon",{attrs:{icon:"file"}}),t._v(" "+t._s(t.files[e].name)+" ")],1)})),1)}),r=[],l={name:"FilesList",props:["files"]},c=l,u=s("2877"),f=Object(u["a"])(c,o,r,!1,null,null,null),d=f.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",{staticClass:"mb-1 mx-3 small",staticStyle:{position:"fixed",bottom:"0"}},[s("p",[s("font-awesome-icon",{class:this.systemStatusClass,attrs:{icon:"circle"}}),t._v(" "+t._s(this.getSystemStatus())),s("br"),s("small",{staticClass:"text-secondary"},[s("font-awesome-icon",{staticClass:"mr-1",class:this.systemStatus,attrs:{icon:"server"}}),t._v(" "+t._s(this.$backend.getHostname())+" "),s("br")],1)],1)])},m=[],h={name:"SystemStatus",props:["systemStatus"],computed:{systemStatusClass:function(){return"online"===this.systemStatus?"online":"booting"===this.systemStatus?"booting":"offline"}},methods:{getSystemStatus:function(){return"online"===this.systemStatus?"System online":"booting"===this.systemStatus?"Booting...":"System offline"}}},b=h,g=(s("fa90"),Object(u["a"])(b,p,m,!1,null,"7212d8b6",null)),v=g.exports,y=s("bc3a"),S=s.n(y),w={components:{SystemStatus:v,FilesList:d},data:function(){return{files:{},uploading:!1,systemStatus:"booting"}},methods:{onFileSelected:function(t){var e=this;console.log("start"),this.uploading=!0;var s=t.target.files[0],n=new FormData;n.append("file",s),S.a.put(this.$backend.getUrlUpload(),n).then((function(t){var n={name:s.name,id:t.data};e.$set(e.files,t.data,n),e.uploading=!1,console.log("done")}))},selectFile:function(){var t=this.$refs.file;t.click()},checkStatus:function(){var t=this;S.a.get(this.$backend.getUrlPing()).then((function(e){return t.systemStatus="pong"===e.data?"online":"offline"})).catch((function(e){console.error(e),t.systemStatus="offline"}))}},mounted:function(){var t=this;this.checkStatus(),setInterval((function(){t.checkStatus()}),15e3)}},k=w,_=(s("034f"),Object(u["a"])(k,a,i,!1,null,null,null)),x=_.exports,O=s("8c4f"),U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 mr-4 border-bottom "},[s("h1",{staticClass:"h2"},[t._v("Details of file "),s("code",[t._v(t._s(this.file.name))])])]),s("b-tabs",{attrs:{"content-class":"mt-3"}},[s("b-tab",{attrs:{title:"Picture 1"}},[s("img",{attrs:{src:this.$backend.getUrlPic1(this.file.id)}})]),s("b-tab",{attrs:{title:"Picture 2"}},[s("img",{attrs:{src:this.$backend.getUrlPic2(this.file.id)}})])],1)],1)},j=[],C={name:"Details",props:["files"],data:function(){return{file:{id:null,name:""}}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){"id"in this.$route.params&&(this.$route.params.id in this.files?this.file=this.files[this.$route.params.id]:this.$router.push("/"))}}},$=C,P=Object(u["a"])($,U,j,!1,null,null,null),D=P.exports;n["default"].use(O["a"]);var F=[{path:"/details/:id",name:"Details",component:D}],T=new O["a"]({routes:F}),E=T,M=(s("f9e3"),s("2dd8"),s("5f5b")),H=s("ecee"),J=s("c074"),L=s("ad3d"),N=s("d4ec"),A=s("bee2"),B=function(){function t(){Object(N["a"])(this,t),this.url=s("fbab")}return Object(A["a"])(t,[{key:"getHostname",value:function(){return this.url.hostname}},{key:"getProtocol",value:function(){return this.url.protocol}},{key:"getUrl",value:function(){return this.getProtocol()+"://"+this.getHostname()}},{key:"getUrlPing",value:function(){return this.getUrl()+"/api/v1/system/ping"}},{key:"getUrlUpload",value:function(){return this.getUrl()+"/api/v1/upload"}},{key:"getUrlPic1",value:function(t){return this.getUrl()+"/api/v1/"+t+"/pic1"}},{key:"getUrlPic2",value:function(t){return this.getUrl()+"/api/v1/"+t+"/pic2"}}]),t}();n["default"].use(M["a"]),H["c"].add(J["a"]),n["default"].component("font-awesome-icon",L["a"]),n["default"].prototype.$backend=new B,n["default"].config.productionTip=!1,new n["default"]({router:E,render:function(t){return t(x)}}).$mount("#app"),document.title="DiaTool"},"85ec":function(t,e,s){},fa90:function(t,e,s){"use strict";s("1732")},fbab:function(t){t.exports=JSON.parse('{"protocol":"https","hostname":"diatool-eu1.herokuapp.com"}')}});
//# sourceMappingURL=app.72c0faee.js.map